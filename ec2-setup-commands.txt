sudo apt update
sudo DEBIAN_FRONTEND=noninteractive apt install -y nginx
sudo mkdir -p /etc/nginx/ssl
sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/nginx/ssl/nginx.key -out /etc/nginx/ssl/nginx.crt -subj '/C=AR/O=ASGP/CN=98.95.235.51'
echo 'server { listen 443 ssl; server_name 98.95.235.51; ssl_certificate /etc/nginx/ssl/nginx.crt; ssl_certificate_key /etc/nginx/ssl/nginx.key; location / { proxy_pass http://localhost:3000; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Proto https; } }' | sudo tee /etc/nginx/sites-available/asgp
sudo ln -sf /etc/nginx/sites-available/asgp /etc/nginx/sites-enabled/
sudo rm -f /etc/nginx/sites-enabled/default
sudo nginx -t
sudo systemctl restart nginx
sudo systemctl enable nginx
curl -k https://localhost/
